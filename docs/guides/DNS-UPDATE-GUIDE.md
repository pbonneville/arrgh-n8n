# DNS Configuration Guide for [subdomain.your-domain.com]

## üåê Domain Migration to Cloud Run

Your Cloud Run domain mapping has been created! Now you need to update your DNS records to point `[subdomain.your-domain.com]` to Google Cloud Run.

### Required DNS Change

You need to create/update the following DNS record:

| Type | Name | Value | TTL |
|------|------|-------|-----|
| CNAME | n8n | ghs.googlehosted.com. | 300 |

### Step-by-Step Instructions

#### Option 1: If you use Google Domains
1. Go to [domains.google.com](https://domains.google.com)
2. Click on your domain `[your-domain.com]`
3. Navigate to DNS ‚Üí Manage custom records
4. Add new record:
   - Type: CNAME
   - Host name: n8n
   - Data: ghs.googlehosted.com.
   - TTL: 300

#### Option 2: If you use Cloudflare
1. Log into [Cloudflare Dashboard](https://dash.cloudflare.com)
2. Select your domain `[your-domain.com]`
3. Go to DNS settings
4. Add record:
   - Type: CNAME
   - Name: n8n
   - Target: ghs.googlehosted.com
   - Proxy status: DNS only (grey cloud)
   - TTL: Auto

**Important**: If using Cloudflare, make sure proxy is **disabled** (grey cloud) for Cloud Run to work properly.

#### Option 3: Other DNS Providers
1. Access your DNS provider's control panel
2. Find DNS/Zone management
3. Add a CNAME record:
   - Subdomain/Host: n8n
   - Points to: ghs.googlehosted.com.
   - TTL: 300 (5 minutes)

### Current Status

- ‚úÖ Domain mapping created in Cloud Run
- ‚è≥ Waiting for DNS propagation
- ‚è≥ SSL certificate will be provisioned automatically after DNS is verified

### Timeline

1. **DNS Update**: Update your DNS records now
2. **Propagation**: 5-30 minutes (can take up to 48 hours globally)
3. **SSL Certificate**: Automatically provisioned after DNS verification (15-30 minutes)
4. **Access**: Once complete, access n8n at https://[subdomain.your-domain.com]

### How to Verify

Check DNS propagation:
```bash
# Check if CNAME is set correctly
dig [subdomain.your-domain.com] CNAME

# Expected result should show:
# [subdomain.your-domain.com]. 300 IN CNAME ghs.googlehosted.com.
```

Check domain mapping status:
```bash
gcloud beta run domain-mappings describe \
  --domain [subdomain.your-domain.com] \
  --region us-central1 \
  --format="value(status.conditions[0].message)"
```

### Troubleshooting

**If SSL certificate doesn't provision after 1 hour:**
1. Verify DNS is correctly pointing to `ghs.googlehosted.com.`
2. Check there are no conflicting A/AAAA records for the subdomain
3. Ensure no proxy/CDN is interfering (like Cloudflare proxy)

**To check certificate status:**
```bash
gcloud beta run domain-mappings list --region us-central1
```

### Next Steps

1. **Update DNS** - Do this now in your DNS provider
2. **Wait** - Allow 15-30 minutes for propagation
3. **Test** - Visit https://[subdomain.your-domain.com]
4. **Update Bookmarks** - Replace old Render URL with new custom domain

### Important Notes

- Your n8n instance remains accessible at the Cloud Run URL during migration
- No data or configuration will be lost
- The old Render URL will continue working until you shut it down
- All webhooks should be updated to use the new domain once active

---

**Current Cloud Run URL**: [Generated by deployment script]
**Future Custom Domain**: https://[your-domain.com]